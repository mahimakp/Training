<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>PatientAddUI</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div>
        <div class="card" style="margin-top:30px;">
            
            <div class="card-body">
                <form class="form-check" [formGroup]="patientobj.formgroup">

                    <div class="form-group">
                        <label>Patient Name :  </label>
                        <input type="text" formControlName="PatientNameControl" [(ngModel)] = "patientobj.name" class="form-control" id="name" name="name" />
                    </div>

                    <div *ngIf ="patientobj.formgroup.dirty"
                    [hidden]="patientobj.formgroup.controls['PatientNameControl'].valid"
                    class="alert alert-danger">Patient name is required</div>
                    
                    <div class="form-group">
                        <label>Patient Address :  </label>
                        <input type="text"   [ngModelOptions]="{standalone: true}" [(ngModel)] = "patientobj.address"  class="form-control" />
                    </div>

                    <div class="form-group">
                        <label>Patient Email :  </label>
                        <input type="text" formControlName="EmailControl" [(ngModel)] = "patientobj.email" class="form-control" />
                    </div>

                    <div *ngIf ="patientobj.formgroup.dirty"
                    [hidden]="!(patientobj.formgroup.controls['EmailControl'].hasError('required'))"
                    class="alert alert-danger">Email is required</div>

                    <div *ngIf ="patientobj.formgroup.dirty"
                    [hidden]="!(patientobj.formgroup.controls['EmailControl'].hasError('pattern'))"
                    class="alert alert-danger">Invalid Format</div> 
                    

                    <br>
                

                </form>   

                <div class="form-check">
                   <br>

                    <div class="form-group">
                        <label> Are you valid :- </label>
                        {{patientobj.formgroup.valid}} 
                    </div>

                    <div class="form-group">
                        <label>Patient Name HasError :- </label>
                        {{patientobj.formgroup.controls['PatientNameControl'].hasError('required')}}
                    </div>

                    <div class="form-group">
                        <label>Email Has Error required :- </label>
                        {{patientobj.formgroup.controls['EmailControl'].hasError('required')}}
                    </div>

                    <div class="form-group">
                        <label> Email format has error :- </label>
                        {{patientobj.formgroup.controls['EmailControl'].hasError('pattern')}}
                    </div>

                    <div class="form-group">
                        <label>Patient Name :  </label>
                         {{patientobj.name}} 
                    </div>
                    <div class="form-group">
                        <label>Patient Address :  </label>
                        {{patientobj.address}} 
                     </div>

                    <div class="form-group">
                        <label>Patient Email :  </label>
                        {{patientobj.email}} 
                   </div>
                </div>   
                <div class="form-check">
                <div class="form-group"> 
                    <input type="button" (click)="AddInMemory()" [disabled]="!patientobj.formgroup.valid" value="Add in Memory" class="btn btn-primary"/>
                </div>
                
                <div class="form-group">
                    <input type="button" (click)="Add()"  value="Save to Database" class="btn btn-primary"/>
                </div>
            </div>
            </div>
        </div>
        <br>
        
         <!-- <table mat-table [dataSource]="patientObjs">
            
          </table>  -->
        <table class="table">
            <tr>
                <td>Name </td>
                <td>Address </td>
                <td>Email </td>
            </tr>

            <tr *ngFor = "let temppat of patientObjs">
                <td>{{temppat.name}}</td>
                <td>{{temppat.address}}</td>
                <td>{{temppat.email}}</td>
            </tr>
        </table> 

        <br>

    </div>
</body>
</html>